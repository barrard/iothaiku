

<input id='nameInput' type="text">
<button onclick="sayHello()">say hellw</button>	
<div id='helloResponse'></div>
<h2>Upload an image</h2>
<input type="file" id='uploadedFile' multiple>
<canvas id="mainCanvas"></canvas>
<script src='js/images.js'></script>
<script>
	function sayHello() {
		console.log('say hello')
		var name = document.getElementById('nameInput').value
		console.log(name)
		postAjax('/ajax/hello/', {name:name}, function(resp){
			var helloResponse = document.getElementById('helloResponse')
			helloResponse.innerHTML=resp
			console.log(resp)
		})
	}

	function getAjax(url, success) {
	    var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
	    xhr.open('GET', url);
	    xhr.onreadystatechange = function() {
	        if (xhr.readyState>3 && xhr.status==200) success(xhr.responseText);
	    };
	    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
	    xhr.send();
	    return xhr;
	}


	function postAjax(URL, data, callback){
		var request = new XMLHttpRequest();
		var resp = {}
		// if(typeof data !='string'){
		// 	data = JSON.stringify(data)
		// }
		var params = typeof data == 'string' ? data : Object.keys(data).map(
		        function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]) }
		    ).join('&');
		request.open('POST', URL);

		request.onload = function() {
		  if (request.status >= 200 && request.status < 400) {
		    // Success!
		    resp.response = request.responseText;
		    callback(resp.response)

		  } else {
		    // We reached our target server, but it returned an error
		    resp.err = 'err'
		    callback(resp.err)

		  }
		};

		request.onerror = function() {
		  // There was a connection error of some sort
		};
	    request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
	    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
		request.send(params);
	}
</script>
